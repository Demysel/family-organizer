<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Organizer</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo="> <!-- Favicon vide -->
    
    <link rel="stylesheet" href="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.css" />
    
    <!-- Style personnalisÃ© -->
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <div id="loading" class="loader"></div>
    
    <div class="dashboard hidden">
        <!-- Section Calendrier -->
        <div class="calendar-section">
            <h2>ðŸ“… Calendrier Familial</h2>
            <div class="event-controls">
                <input type="text" id="eventTitle" placeholder="Titre de l'Ã©vÃ©nement" class="event-input">
                <input type="datetime-local" id="eventStart" class="event-input">
                <input type="datetime-local" id="eventEnd" class="event-input">
                <input type="color" id="eventColor" value="#4CAF50" title="Choisir une couleur">
                <button onclick="addEvent()" class="btn-add">âž• Ajouter Ã‰vÃ©nement</button>
            </div>
            <div id="calendar"></div>
        </div>

        <!-- Section TÃ¢ches -->
        <div class="tasks-section">
            <h2>âœ… TÃ¢ches Familiales</h2>
            <div class="task-controls">
                <input type="text" id="newTask" placeholder="Nouvelle tÃ¢che..." class="task-input">
                <button onclick="addTask()" class="btn-add">ðŸ“¥ Ajouter TÃ¢che</button>
            </div>
            <div id="taskList" class="task-list"></div>
        </div>
    </div>

    <script src="https://uicdn.toast.com/calendar/latest/toastui-calendar.min.js"></script>
    <!-- Scripts applicatifs -->
    <script src="scripts/database.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/calendar.js"></script>
    <script src="scripts/tasks.js"></script>

    <!-- Initialisation -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Chargement simultanÃ© du calendrier et des tÃ¢ches
                await Promise.all([
                    initCalendar(),
                    loadTasks()
                ]);
                
                // Masquer le loader et afficher le dashboard
                document.getElementById('loading').classList.add('hidden');
                document.querySelector('.dashboard').classList.remove('hidden');
                
            } catch (error) {
                console.error('Erreur initialisation:', error);
                alert('Erreur de chargement - VÃ©rifiez la console (F12)');
            }
        });
    </script>
</body>
</html>
